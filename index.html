<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        window.addEventListener("load", initialize);
        answerArray = new Array();
        function initialize() {
 
            var ajaxStudent = new XMLHttpRequest();
            ajaxStudent.open("get", "https://opentdb.com/api.php?amount=10&category=18&difficulty=medium&type=multiple", false);
            ajaxStudent.send();
            var questions = JSON.parse(ajaxStudent.responseText);
            console.log(questions);
            questionarray = questions["results"];    
            fill(questionarray);
            
        }
        function fill(questions) {

            
            var qbox = document.getElementById("qbox");
            for(i = 0 ; i<questions.length;i++){

                var no = Math.floor((Math.random() * 10) + 1)%4;
                var qno = i+1;
                var question = questions[i];
                console.log(question["question"]);
                console.log(question["correct_answer"]);
                console.log(question["incorrect_answers"]);

                var box = document.createElement("div");
                var para = document.createElement("p");
                para.innerHTML = qno+". "+question["question"]
                box.appendChild(para);
                



                var ol = document.createElement("ol");
                var x = 0;
                for(var k = 0 ; k < 4 ; k++){

            
                    var li = document.createElement("li");

                    var input = document.createElement("input");
                    input.setAttribute("type","radio");
                    input.setAttribute("id",qno+""+k);
                    input.setAttribute("name",qno);
                    

                    var label = document.createElement("label");
                    label.setAttribute("for",qno);
                    if(k==no){
                        label.innerHTML = question["correct_answer"];
                        input.setAttribute("value",question["correct_answer"]);
                    }else{
                        label.innerHTML = question["incorrect_answers"][x];
                        input.setAttribute("value",question["incorrect_answers"][x]);
                        x++;
                    }
                    

                    li.appendChild(input);
                    li.appendChild(label);
                    ol.appendChild(li);

                }

                box.appendChild(ol);
                qbox.appendChild(box);
                



  
            }
            
        }
        function submitF(){
            
            answerArray =new Array();
            for(i=0;i<10;i++){
                var qno = i+1;
                labelmark:
                for(var k = 0 ; k < 4 ; k++){
                    var anserinput = document.getElementById(qno+""+k);
                     if(anserinput.checked==true){
                        answerArray.push(anserinput.value);
                        break labelmark;
                     }   
                     else if(k==3){
                        answerArray.push("0");
                     }
                }

            }
            console.log(answerArray);
            var marks = 0;
            for(i=0;i<answerArray.length;i++){
                 if(answerArray[i]!=0 && answerArray[i]==questionarray[i]["correct_answer"]){
                    marks+=10;
                }
            }
            var PF;
            if(marks>49){
                PF = "  /  Pass";
            }else{
                PF = "  /  Fail";
            }
            alert(marks+""+PF);
        }
        function reviewF(){
           
            for(i=0;i<10;i++){
                var qno = i+1;
                labelmark2:
                for(var k = 0 ; k < 4 ; k++){
                    if(document.getElementById(qno+""+k).value==answerArray[i]){
                        document.getElementById(qno+""+k).checked=true;
                        break labelmark2;
                    }
                }

            }
        }
        function clearF(){
           
           for(i=0;i<10;i++){
               var qno = i+1;
               for(var k = 0 ; k < 4 ; k++){

                   var anserinput = document.getElementById(qno+""+k).checked=false;
               }

           }
       }
    </script>
</head>
<body>
    <div id="qbox">

    </div>
    <input type="button" value="Submit" onclick="submitF()"/>
    <input type="button" value="Claer" onclick="clearF()"/>
    <input type="button" value="Review" onclick="reviewF()"/>
</body>
</html>